"use strict";(globalThis.webpackChunkwp_event_solution=globalThis.webpackChunkwp_event_solution||[]).push([[84],{13084:(e,t,n)=>{n.r(t),n.d(t,{default:()=>o});var a=n(51609),l=n(47767),i=n(34612),s=n(40447);const r=[...s.Ri,...s.TM,...s.h3];function o(){return(0,a.createElement)(l.Routes,null,(0,a.createElement)(l.Route,{element:(0,a.createElement)(i.A,null)},r.map((e,t)=>(0,a.createElement)(l.Route,{key:t,path:e.slug,element:(0,a.createElement)(e.page,{title:e.title})})),(0,a.createElement)(l.Route,{path:"*",element:(0,a.createElement)(l.Navigate,{to:s.Ri[0].slug})})))}},18257:(e,t,n)=>{n.d(t,{A:()=>V});var a=n(51609),l=n(56427),i=n(29491),s=n(47143),r=n(86087),o=n(52619),c=n(27723),d=n(17437),v=n(16370),u=n(11721),m=n(92911),E=n(40372),p=n(47152),h=n(75063),g=n(32099),A=n(74353),_=n.n(A),f=n(47767),y=n(54725),b=n(7638),w=n(80734),F=n(3493),x=n(57237),k=n(27154),C=n(10962),R=n(93997),N=n(64282),S=n(69815),D=n(43065),L=n(6836),B=n(98901),I=n(51201);const{useBreakpoint:z}=E.Ay,O=(0,s.withDispatch)(e=>({setShouldRevalidateEventList:e("eventin/global").setRevalidateEventList})),V=(0,i.compose)(O)(e=>{const{setShouldRevalidateEventList:t}=e,{form:n,saveButtonLoading:i,id:s,sourceData:E,isLoading:A}=(0,R.useEventSelectContext)(),{setSourceData:O}=(0,R.useEventDispatchContext)(),V="draft"===E?.status,[T,P]=(0,r.useState)(!V),[$,H]=(0,r.useState)(!1),[W,q]=(0,r.useState)(V);(0,r.useEffect)(()=>{const e="draft"===E?.status;P(!e),q(e)},[E?.status]);const M=(0,f.useNavigate)(),{evnetin_ai_active:U,evnetin_pro_active:Y}=window?.eventin_ai_local_data||{},j=n.getFieldValue("title"),G=n.getFieldValue("start_date"),Z=n.getFieldValue("start_time"),J=`${_()(G).format("ddd")}, ${(0,L.getWordpressFormattedDate)(G)}, ${(0,L.getWordpressFormattedTime)(Z)} `,K=E?.link,Q={pointerEvents:"none",opacity:"0.5",cursor:"not-allowed"},X=S.default.div`
		${e=>e.disabled&&Q}
	`,ee=async e=>{const a={...(0,D.A)(E),status:e},l="publish"===e?(0,c.__)("Event published successfully!","eventin"):(0,c.__)("Event status changed to draft!","eventin");!T&&H(!0);try{const i=await N.A.events.updateEvent(s,a),r=await(0,I.A)(i,n);O(r),"publish"===e&&"Ongoing"===i.status&&(P(e=>!e),q(e=>!e)),t(!0),(0,o.doAction)("eventin_notification",(t=>"publish"===e&&"Ongoing"===t.status?{type:"success",message:l}:"publish"!==e||"Upcoming"!==t.status&&"Expired"!==t.status?"draft"===e?{type:"success",message:l}:{type:"warning",message:(0,c.__)("Event submitted successfully. Awaiting admin approval","eventin")}:{type:"success",message:l})(i)),n.setFieldsValue({status:e,event_slug:i?.event_slug})}catch(e){console.error(e.message),(0,o.doAction)("eventin_notification",{type:"error",message:(0,c.__)("Couldn't change event status!","eventin"),description:`Reason: ${e?.response?.message}`})}finally{H(!1)}},te=[!W&&{label:(0,a.createElement)(b.Ay,{className:"eventin-event-detail-header-dropdown-button",variant:b.qy,size:"small",icon:(0,a.createElement)(y.DraftOutlined,{width:"16",height:"16"}),sx:{"&:hover":{color:"#6B2EE5",backgroundColor:"#f0eafc"}}},(0,c.__)("Draft","eventin")),key:"0",onClick:()=>ee("draft")},{label:(0,a.createElement)(b.i8,{className:"eventin-event-detail-header-dropdown-button",copy:K,variant:b.qy,icon:(0,a.createElement)(y.CloneOutlined,{width:"16",height:"16"}),size:"small",sx:{"&:hover":{color:"#6B2EE5"}}},(0,c.__)("Copy event link","eventin")),key:"1",className:"copy-event"},{label:(0,a.createElement)(b.Ay,{className:"eventin-event-detail-header-dropdown-button",variant:b.qy,onClick:()=>{(0,w.A)({title:(0,c.__)("Are you sure?","eventin"),content:(0,c.__)("Are you sure you want to delete this event?","eventin"),onOk:async()=>{try{await N.A.events.deleteEvent(s),t(!0),M("/")}catch(e){console.error("Error deleting event",e)}}})},icon:(0,a.createElement)(y.DeleteOutlined,{width:"16",height:"16"}),size:"small",sx:{color:"#FF4D4F"}},(0,c.__)("Delete event","eventin")),key:"2",className:"delete-event"}].filter(Boolean),ne=z().sm,ae=(0,o.applyFilters)("eventin-ai-edit-event-modal","eventin-ai");return(0,a.createElement)(l.Fill,{name:k.PRIMARY_HEADER_NAME},(0,a.createElement)(B.BI,{className:"eventin-event-details-header"},(0,a.createElement)("div",{className:"eventin-event-details-header-left"},(0,a.createElement)(m.A,{align:"center",gap:16},(0,a.createElement)(b.Ay,{variant:b.Vt,icon:(0,a.createElement)(y.AngleLeftIcon,null),sx:{height:"36px",width:"36px",backgroundColor:"#F5F5F5",borderColor:"transparent",lineHeight:"1"},onClick:()=>M("/events")}),(0,a.createElement)(m.A,{vertical:!0},(0,a.createElement)(B.k3,null,(0,a.createElement)(x.A,{ellipsis:{tooltip:j},sx:{margin:"0 0 5px",fontSize:"20px",lineHeight:"26px",color:"#41454f",fontWeight:"500"}},A?(0,a.createElement)(h.A.Input,{active:!0,size:"small"}):j)),(0,a.createElement)(F.A,{sx:{fontSize:"14px",color:"#41454f"}},A?(0,a.createElement)(h.A.Input,{active:!0,style:{height:"12px"}}):J)))),(0,a.createElement)("div",{className:"eventin-event-details-header-right"},(0,a.createElement)(p.A,{gutter:[8,8],style:{alignItems:"center",justifyContent:ne?"flex-end":"flex-start"}},ne&&(0,a.createElement)(v.A,{className:"eventin-ai-button"},(0,a.createElement)(B.WO,{onClick:()=>{U&&Y?(0,o.doAction)("eventin-ai-create-event-modal-visible",{visible:!0}):(0,o.doAction)("eventin-ai-text-generator-modal",{visible:!0})}},(0,a.createElement)(y.AIGenerateIcon,null),(0,a.createElement)(B.oY,null,(0,c.__)("Edit with AI","eventin")))),(0,a.createElement)(v.A,null,(0,a.createElement)(g.A,{placement:"bottom",title:(0,c.__)("Preview","eventin")},(0,a.createElement)("a",{href:K,target:"_blank"},(0,a.createElement)(b.Ay,{variant:b.Vt,sx:{height:"44px",width:"44px",backgroundColor:"#F5F5F5",borderColor:"transparent",lineHeight:"1"}},(0,a.createElement)(y.ExternalLinkOutlined,{width:"18",height:"18"}))))),(0,a.createElement)(v.A,null,(0,a.createElement)(d.mL,{styles:C.S}),(0,a.createElement)(u.A.Button,{trigger:["click"],placement:"bottomRight",overlayClassName:"action-dropdown",className:"ent-compact-btn eventin-event-details-header-dropdown",size:"large",arrow:!0,variant:"tertiary",icon:(0,a.createElement)(y.AngleDownIcon,null),onClick:()=>ee("publish"),loading:$,menu:{items:te},buttonsRender:([e,t])=>[(0,a.createElement)(X,{disabled:T},e),t]},T?(0,c.__)("Published","eventin"):(0,c.__)("Publish","eventin"))),(0,a.createElement)(v.A,null,(0,a.createElement)(b.Ay,{loading:i,onClick:n.submit,variant:b.zB,sx:{fontSize:"16px"}},(0,c.__)("Save Changes","eventin")))))),(0,a.createElement)(ae,{id:s}))})},34612:(e,t,n)=>{n.d(t,{A:()=>d});var a=n(51609),l=n(18257),i=n(99424),s=n(98132),r=n(93997),o=n(98901),c=n(75093);function d(){return(0,a.createElement)(r.default,null,(0,a.createElement)(l.A,null),(0,a.createElement)(o.wn,{className:"eventin-event-details-section"},(0,a.createElement)(i.A,{className:"eventin-event-details-sidebar"}),(0,a.createElement)(o.WP,{className:"eventin-event-wrapper"},(0,a.createElement)(o.gZ,{className:"eventin-event-details-main"},(0,a.createElement)(s.A,null)),(0,a.createElement)(c.FloatingHelpButton,null))))}},98132:(e,t,n)=>{n.d(t,{A:()=>h});var a=n(51609),l=n(29491),i=n(47143),s=n(52619),r=n(27723),o=n(43065),c=n(60742),d=n(75063),v=n(47767),u=n(64282),m=n(93997),E=n(51201);const p=(0,i.withDispatch)(e=>({setShouldRevalidateEventList:e("eventin/global").setRevalidateEventList})),h=(0,l.compose)(p)(function(e){const{setShouldRevalidateEventList:t}=e,{form:n,isLoading:l,id:i}=(0,m.useEventSelectContext)(),{setSaveButtonLoading:p,setSourceData:h}=(0,m.useEventDispatchContext)();return l?(0,a.createElement)(a.Fragment,null,(0,a.createElement)(d.A,{active:!0}),(0,a.createElement)(d.A,{active:!0})):(0,a.createElement)(c.A.Provider,{onFormFinish:e=>{"event-create-form"===e&&(async()=>{p(!0);try{await n.validateFields();const e=n.getFieldsValue(!0),a=(0,o.A)(e),l=a.status?.toLowerCase();["draft","private","publish"].includes(l)||(a.status="publish");const c=await u.A.events.updateEvent(i,a),d=(0,E.A)(c,n);n.setFieldsValue(d),c?.id&&h(d),(0,s.doAction)("eventin_notification",{type:"success",message:(0,r.__)("Event updated successfully","eventin")}),t(!0)}catch(e){(0,s.doAction)("eventin_notification",{type:"error",message:(0,r.__)("Couldn't Update Event!","eventin"),description:`Reason: ${e?.message}`}),console.error("error",e)}finally{setTimeout(()=>{p(!1)},500)}})()}},(0,a.createElement)(c.A,{form:n,name:"event-create-form",layout:"vertical",autoComplete:"on",scrollToFirstError:!0,onFinishFailed:e=>{var t;e.errorFields.length>0&&(t=e.errorFields[0].name[0],n.scrollToField(t,{behavior:"smooth",block:"start"}))}},(0,a.createElement)(v.Outlet,null)))})}}]);