{"version":3,"file":"index.js","mappings":"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","sources":["webpack://wp-image-mask/./src/index.js","webpack://wp-image-mask/./src/style.scss","webpack://wp-image-mask/external window \"ReactJSXRuntime\"","webpack://wp-image-mask/webpack/bootstrap","webpack://wp-image-mask/webpack/runtime/chunk loaded","webpack://wp-image-mask/webpack/runtime/compat get default export","webpack://wp-image-mask/webpack/runtime/define property getters","webpack://wp-image-mask/webpack/runtime/hasOwnProperty shorthand","webpack://wp-image-mask/webpack/runtime/make namespace object","webpack://wp-image-mask/webpack/runtime/jsonp chunk loading","webpack://wp-image-mask/webpack/before-startup","webpack://wp-image-mask/webpack/startup","webpack://wp-image-mask/webpack/after-startup"],"sourcesContent":["/**\n * Lets webpack process CSS, SASS or SCSS files referenced in JavaScript files.\n * All files containing `style` keyword are bundled together. The code used\n * gets applied both to the front of your site and to the editor.\n *\n * @see https://www.npmjs.com/package/@wordpress/scripts#using-css\n */\nimport './style.scss';\n\nconst { __ } = wp.i18n;\n\n/**\n * Add mask attributes for images\n */\nfunction addMaskAttributes(settings, name) {\n\n\tif (typeof settings.attributes !== 'undefined') {\n\t\tif (name === 'core/image') {\n\t\t\tsettings.attributes = Object.assign(settings.attributes, {\n\t\t\t\timageMask: {\n\t\t\t\t\ttype: 'text',\n\t\t\t\t},\n\t\t\t\timageMaskURL: {\n\t\t\t\t\ttype: 'string',\n\t\t\t\t},\n\t\t\t\timageMaskID: { // ID of the custom image attached as mask\n\t\t\t\t\ttype: 'number',\n\t\t\t\t},\n\t\t\t\timageMaskSVG: {\n\t\t\t\t\ttype: 'string',\n\t\t\t\t},\n\t\t\t\timageMaskFit: {\n\t\t\t\t\ttype: 'string',\n\t\t\t\t\tdefault: 'contain',\n\t\t\t\t},\n\t\t\t});\n\n\t\t}\n\t}\n\treturn settings;\n}\n\nwp.hooks.addFilter(\n\t'blocks.registerBlockType',\n\t'wpim/image-mask-attributes',\n\taddMaskAttributes\n);\n\n\n/**\n * Add image mask control for images\n * @see https://awhitepixel.com/blog/add-custom-settings-to-existing-wordpress-gutenberg-blocks/\n */\nconst imageInspectorControls = wp.compose.compose(\n\n\twp.compose.createHigherOrderComponent((BlockEdit) => {\n\t\treturn (props) => {\n\n\t\t\tif (props.name !== 'core/image') {\n\t\t\t\treturn (<BlockEdit {...props} />);\n\t\t\t}\n\n\t\t\tconst { Fragment } = wp.element;\n\t\t\tconst { PanelBody, PanelRow, SelectControl, CustomSelectControl, Button, TextareaControl } = wp.components;\n\t\t\tconst { InspectorControls, MediaUpload, MediaUploadCheck } = wp.blockEditor;\n\t\t\tconst { attributes, isSelected, setAttributes } = props;\n\n\t\t\tconst ALLOWED_MEDIA_TYPES = ['image'];\n\n\t\t\t//*\n\t\t\tif (attributes.imageMask != undefined) {\n\t\t\t\tconst applyMaskStyles = () => {\n\t\t\t\t\tlet rootEl = document.querySelector('.is-root-container');\n\t\t\t\t\tif (!rootEl) {\n\t\t\t\t\t\trootEl = document.querySelector('[name=\"editor-canvas\"]').contentDocument.querySelector('.is-root-container');\n\t\t\t\t\t}\n\t\t\t\t\tconst blockEl = rootEl.querySelector(`#block-${props.clientId}`);\n\t\t\t\t\tif (blockEl) {\n\t\t\t\t\t\tblockEl.classList.add('has-image-mask', `has-${attributes.imageMask}-image-mask`);\n\t\t\t\t\t\tif (attributes.imageMaskFit) {\n\t\t\t\t\t\t\tblockEl.classList.add(`has-image-mask-${attributes.imageMaskFit}-fit`);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconst imgEl = blockEl.querySelector('img');\n\t\t\t\t\t\tif (imgEl) {\n\t\t\t\t\t\t\tif (attributes.imageMask === 'custom' && attributes.imageMaskURL) {\n\t\t\t\t\t\t\t\timgEl.style.maskImage = `url(${attributes.imageMaskURL})`;\n\t\t\t\t\t\t\t\timgEl.style.WebkitMaskImage = `url(${attributes.imageMaskURL})`;\n\t\t\t\t\t\t\t} else if (attributes.imageMask === 'custom-svg' && attributes.imageMaskSVG) {\n\t\t\t\t\t\t\t\tconst svg = `data:image/svg+xml,${encodeURIComponent(attributes.imageMaskSVG.replace(/(\\r\\n|\\r|\\n)/g, \"\"))}`;\n\t\t\t\t\t\t\t\timgEl.style.maskImage = `url('${svg}')`;\n\t\t\t\t\t\t\t\timgEl.style.WebkitMaskImage = `url('${svg}')`;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\timgEl.style.removeProperty('mask-image');\n\t\t\t\t\t\t\t\timgEl.style.removeProperty('-webkit-mask-image');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\twindow._wpLoadBlockEditor.then(applyMaskStyles);\n\t\t\t}\n\t\t\t// */\n\n\t\t\tconst controlStyles = {\n\t\t\t\tbackgroundPosition: 'left 8px center',\n\t\t\t\tbackgroundRepeat: 'no-repeat',\n\t\t\t\tbackgroundSize: '25px',\n\t\t\t\tpaddingLeft: '38px'\n\t\t\t}\n\n\t\t\t// Available image mask options\n\t\t\tconst imageMaskControlOptions = [\n\t\t\t\t{\n\t\t\t\t\tname: __('None', 'wp-image-mask'),\n\t\t\t\t\tkey: '',\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tname: __('Triangle', 'wp-image-mask'),\n\t\t\t\t\tkey: 'triangle',\n\t\t\t\t\tstyle: { ...controlStyles, backgroundImage: `url(${wpimGlobal.pluginDirUrl}/src/img/triangle.svg)` },\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tname: __('Diamond', 'wp-image-mask'),\n\t\t\t\t\tkey: 'diamond',\n\t\t\t\t\tstyle: { ...controlStyles, backgroundImage: `url(${wpimGlobal.pluginDirUrl}/src/img/diamond.svg)` },\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tname: __('Brush', 'wp-image-mask'),\n\t\t\t\t\tkey: 'brush-1',\n\t\t\t\t\tstyle: { ...controlStyles, backgroundImage: `url(${wpimGlobal.pluginDirUrl}/src/img/brush-1.svg)` },\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tname: __('Star', 'wp-image-mask'),\n\t\t\t\t\tkey: 'star',\n\t\t\t\t\tstyle: { ...controlStyles, backgroundImage: `url(${wpimGlobal.pluginDirUrl}/src/img/star.svg)` },\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tname: __('Custom image', 'wp-image-mask'),\n\t\t\t\t\tkey: 'custom',\n\t\t\t\t\tstyle: { ...controlStyles, backgroundImage: attributes.imageMaskURL ? `url(${attributes.imageMaskURL})` : `url(${wpimGlobal.pluginDirUrl}/src/img/custom.svg)` },\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tname: __('SVG code', 'wp-image-mask'),\n\t\t\t\t\tkey: 'custom-svg',\n\t\t\t\t\tstyle: { ...controlStyles, backgroundImage: `url(${wpimGlobal.pluginDirUrl}/src/img/custom-svg.svg)` },\n\t\t\t\t},\n\t\t\t];\n\n\n\t\t\treturn (\n\t\t\t\t<Fragment>\n\t\t\t\t\t<BlockEdit {...props} />\n\t\t\t\t\t{isSelected && (props.name == 'core/image') &&\n\t\t\t\t\t\t<InspectorControls>\n\t\t\t\t\t\t\t<PanelBody\n\t\t\t\t\t\t\t\ttitle={__(\"Image mask\", 'wp-image-mask')}\n\t\t\t\t\t\t\t\tinitialOpen={true}\n\t\t\t\t\t\t\t>\n\n\t\t\t\t\t\t\t\t<PanelRow>\n\t\t\t\t\t\t\t\t\t<CustomSelectControl\n\t\t\t\t\t\t\t\t\t\tlabel={__(\"Select Mask Type\", 'wp-image-mask')}\n\t\t\t\t\t\t\t\t\t\tvalue={imageMaskControlOptions.find((option) => option.key === attributes.imageMask)}\n\t\t\t\t\t\t\t\t\t\toptions={imageMaskControlOptions}\n\t\t\t\t\t\t\t\t\t\tonChange={(newVal) => setAttributes({\n\t\t\t\t\t\t\t\t\t\t\timageMask: newVal.selectedItem.key,\n\t\t\t\t\t\t\t\t\t\t\timageMaskURL: newVal.selectedItem.key !== 'custom' ? '' : attributes.imageMaskURL,\n\t\t\t\t\t\t\t\t\t\t\timageMaskID: newVal.selectedItem.key !== 'custom' ? '' : attributes.imageMaskID,\n\t\t\t\t\t\t\t\t\t\t\timageMaskSVG: newVal.selectedItem.key !== 'custom-svg' ? '' : attributes.imageMaskSVG,\n\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</PanelRow>\n\n\t\t\t\t\t\t\t\t{attributes.imageMask === 'custom' &&\n\t\t\t\t\t\t\t\t\t<PanelRow>\n\t\t\t\t\t\t\t\t\t\t<MediaUploadCheck>\n\t\t\t\t\t\t\t\t\t\t\t<MediaUpload\n\t\t\t\t\t\t\t\t\t\t\t\tonSelect={\n\t\t\t\t\t\t\t\t\t\t\t\t\t(media) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetAttributes({ imageMaskURL: media.url, imageMaskID: media.id })\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\tallowedTypes={ALLOWED_MEDIA_TYPES}\n\t\t\t\t\t\t\t\t\t\t\t\tvalue={attributes.imageMaskID}\n\t\t\t\t\t\t\t\t\t\t\t\trender={({ open }) => (\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Button className={\"is-tertiary\"} onClick={open}>{__('Choose Mask Image', 'wp-image-mask')}</Button>\n\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</MediaUploadCheck>\n\t\t\t\t\t\t\t\t\t\t{attributes.imageMaskURL && attributes.imageMaskID &&\n\t\t\t\t\t\t\t\t\t\t\t<img src={attributes.imageMaskURL} alt=\"custom mask preview\" width=\"50\" height=\"auto\" />\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t</PanelRow>\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t{attributes.imageMask === 'custom-svg' &&\n\t\t\t\t\t\t\t\t\t<PanelRow>\n\t\t\t\t\t\t\t\t\t\t<TextareaControl\n\t\t\t\t\t\t\t\t\t\t\tlabel={__('Paste SVG code here', 'wp-image-mask')}\n\t\t\t\t\t\t\t\t\t\t\tvalue={attributes.imageMaskSVG}\n\t\t\t\t\t\t\t\t\t\t\tonChange={(newVal) => setAttributes({ imageMaskSVG: newVal })}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</PanelRow>\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t<PanelRow>\n\t\t\t\t\t\t\t\t\t<SelectControl\n\t\t\t\t\t\t\t\t\t\tlabel={__(\"Mask Fit\", 'wp-image-mask')}\n\t\t\t\t\t\t\t\t\t\tvalue={attributes.imageMaskFit}\n\t\t\t\t\t\t\t\t\t\toptions={[\n\t\t\t\t\t\t\t\t\t\t\t{ label: __('Auto', 'wp-image-mask'), value: 'auto' },\n\t\t\t\t\t\t\t\t\t\t\t{ label: __('Contain', 'wp-image-mask'), value: 'contain' },\n\t\t\t\t\t\t\t\t\t\t\t{ label: __('Cover', 'wp-image-mask'), value: 'cover' },\n\t\t\t\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t\t\t\t\tonChange={(newVal) => setAttributes({ imageMaskFit: newVal })}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</PanelRow>\n\n\t\t\t\t\t\t\t</PanelBody>\n\t\t\t\t\t\t</InspectorControls>\n\t\t\t\t\t}\n\t\t\t\t</Fragment>\n\t\t\t);\n\t\t};\n\t}, 'imageInspectorControls'));\n\nwp.hooks.addFilter(\n\t'editor.BlockEdit',\n\t'wpim/image-inspector-control',\n\timageInspectorControls\n);\n\n\n/**\n * Apply extra classes and inline styles\n */\nfunction blocksApplyExtraClass(extraProps, blockType, attributes) {\n\tconst { imageMask, imageMaskFit } = attributes;\n\n\tif (blockType.name === \"core/image\") {\n\t\tlet className = (extraProps.className != undefined) ? extraProps.className : '';\n\n\t\tif (imageMask != undefined && imageMask !== \"\") {\n\t\t\tclassName += ' has-image-mask has-' + imageMask + '-image-mask';\n\n\t\t\tif (imageMaskFit != undefined && imageMaskFit !== \"\") {\n\t\t\t\tclassName += ' has-image-mask-' + imageMaskFit + '-fit';\n\t\t\t}\n\t\t}\n\n\t\textraProps.className = className;\n\t}\n\n\treturn extraProps;\n}\n\nwp.hooks.addFilter(\n\t'blocks.getSaveContent.extraProps',\n\t'wpim/image-apply-class',\n\tblocksApplyExtraClass\n);\n\n\n/**\n * Add image inline styles for Editor wrapper blocks\n * @see https://stackoverflow.com/questions/68071302/adding-inline-style-to-gutenberg-core-blocks-in-the-editor?rq=1\n */\nconst withInlineStyleImage = wp.compose.createHigherOrderComponent(\n\t(BlockListBlock) => {\n\t\treturn (props) => {\n\t\t\tconst { block, attributes } = props;\n\t\t\tconst { imageMask, imageMaskFit } = attributes;\n\n\t\t\tif ('core/image' !== block.name) {\n\t\t\t\treturn <BlockListBlock {...props} />;\n\t\t\t}\n\n\t\t\tlet newClassName = (attributes.className != undefined) ? attributes.className : '';\n\n\t\t\tif (imageMask != undefined) {\n\t\t\t\tif (imageMask === 'custom' || imageMask === 'custom-svg') {\n\t\t\t\t\tnewClassName += ' has-image-mask has-custom-image-mask';\n\t\t\t\t} else {\n\t\t\t\t\tnewClassName += ' has-image-mask has-' + imageMask + '-image-mask';\n\t\t\t\t}\n\n\t\t\t\tif (imageMaskFit != undefined && imageMaskFit !== \"\") {\n\t\t\t\t\tnewClassName += ' has-image-mask-' + imageMaskFit + '-fit';\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn (\n\t\t\t\t<BlockListBlock\n\t\t\t\t\t{...props}\n\t\t\t\t\twrapperProps={{ className: newClassName }}\n\t\t\t\t/>\n\t\t\t);\n\t\t}\n\t},\n\t'withInlineStyleImage'\n);\n\nwp.hooks.addFilter(\n\t'editor.BlockListBlock',\n\t'wpim/with-inline-style-image',\n\twithInlineStyleImage\n);\n","// extracted by mini-css-extract-plugin\nexport {};","module.exports = window[\"ReactJSXRuntime\"];","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = (result, chunkIds, fn, priority) => {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t\"index\": 0,\n\t\"./style-index\": 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = (chunkId) => (installedChunks[chunkId] === 0);\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some((id) => (installedChunks[id] !== 0))) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkwp_image_mask\"] = self[\"webpackChunkwp_image_mask\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [\"./style-index\"], () => (__webpack_require__(\"./src/index.js\")))\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n",""],"names":["jsx","_jsx","jsxs","_jsxs","__","wp","i18n","addMaskAttributes","settings","name","attributes","Object","assign","imageMask","type","imageMaskURL","imageMaskID","imageMaskSVG","imageMaskFit","default","hooks","addFilter","imageInspectorControls","compose","createHigherOrderComponent","BlockEdit","props","Fragment","element","PanelBody","PanelRow","SelectControl","CustomSelectControl","Button","TextareaControl","components","InspectorControls","MediaUpload","MediaUploadCheck","blockEditor","isSelected","setAttributes","ALLOWED_MEDIA_TYPES","undefined","applyMaskStyles","rootEl","document","querySelector","contentDocument","blockEl","clientId","classList","add","imgEl","style","maskImage","WebkitMaskImage","svg","encodeURIComponent","replace","removeProperty","window","_wpLoadBlockEditor","then","controlStyles","backgroundPosition","backgroundRepeat","backgroundSize","paddingLeft","imageMaskControlOptions","key","backgroundImage","wpimGlobal","pluginDirUrl","children","title","initialOpen","label","value","find","option","options","onChange","newVal","selectedItem","onSelect","media","url","id","allowedTypes","render","open","className","onClick","src","alt","width","height","blocksApplyExtraClass","extraProps","blockType","withInlineStyleImage","BlockListBlock","block","newClassName","wrapperProps"],"sourceRoot":""}